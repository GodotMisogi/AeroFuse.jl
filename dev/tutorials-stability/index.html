<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Aerodynamic Stability Analysis · AeroFuse</title><script async src="https://www.googletagmanager.com/gtag/js?id=UA-89998292-1"></script><script>  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'UA-89998292-1', {'page_path': location.pathname + location.search + location.hash});
</script><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script><link href="../assets/logo.ico" rel="icon" type="image/x-icon"/><link href="https://fonts.googleapis.com/css?family=Montesserat|Fira+Code&amp;display=swap" rel="stylesheet" type="text/css"/></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../"><img src="../assets/logo.svg" alt="AeroFuse logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../">AeroFuse</a></span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><span class="tocitem">Tutorials</span><ul><li><a class="tocitem" href="../tutorials-airfoil/">Airfoil Aerodynamic Analysis</a></li><li><a class="tocitem" href="../tutorials-aircraft/">Aircraft Aerodynamic Analysis</a></li><li class="is-active"><a class="tocitem" href>Aerodynamic Stability Analysis</a><ul class="internal"><li><a class="tocitem" href="#Objectives"><span>Objectives</span></a></li><li><a class="tocitem" href="#Aircraft-Geometry"><span>Aircraft Geometry</span></a></li><li><a class="tocitem" href="#Aerodynamic-Analysis"><span>Aerodynamic Analysis</span></a></li><li><a class="tocitem" href="#Static-Stability-Analysis"><span>Static Stability Analysis</span></a></li></ul></li></ul></li><li><a class="tocitem" href="../howto/">How-to Guide</a></li><li><a class="tocitem" href="../theory/">Theory</a></li><li><span class="tocitem">Reference</span><ul><li><a class="tocitem" href="../geometry/">Geometry API</a></li><li><a class="tocitem" href="../aerodynamics/">Aerodynamics API</a></li><li><a class="tocitem" href="../structures/">Structures API</a></li><li><a class="tocitem" href="../development/">In-Progress API</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Tutorials</a></li><li class="is-active"><a href>Aerodynamic Stability Analysis</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Aerodynamic Stability Analysis</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/GodotMisogi/AeroFuse.jl/blob/main/docs/lit/tutorials-stability.jl" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h2 id="Objectives"><a class="docs-heading-anchor" href="#Objectives">Objectives</a><a id="Objectives-1"></a><a class="docs-heading-anchor-permalink" href="#Objectives" title="Permalink"></a></h2><p>Here we will show you how to perform an aerodynamic stability analysis of a conventional aircraft. Here, we&#39;ll attempt to replicate the design of a Boeing 777. It won&#39;t be a realistic replication, but the overall geometry will match to a certain extent.</p><p><img src="https://images-wixmp-ed30a86b8c4ca887773594c2.wixmp.com/f/dc763bf2-302c-46be-8a52-4cb7c11598e5/d74vi3c-372cf93b-f4ad-4046-85e3-49f667d3c55a.png?token=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJ1cm46YXBwOjdlMGQxODg5ODIyNjQzNzNhNWYwZDQxNWVhMGQyNmUwIiwiaXNzIjoidXJuOmFwcDo3ZTBkMTg4OTgyMjY0MzczYTVmMGQ0MTVlYTBkMjZlMCIsIm9iaiI6W1t7InBhdGgiOiJcL2ZcL2RjNzYzYmYyLTMwMmMtNDZiZS04YTUyLTRjYjdjMTE1OThlNVwvZDc0dmkzYy0zNzJjZjkzYi1mNGFkLTQwNDYtODVlMy00OWY2NjdkM2M1NWEucG5nIn1dXSwiYXVkIjpbInVybjpzZXJ2aWNlOmZpbGUuZG93bmxvYWQiXX0.bS5c5rkhqB2yoaOmIeRut7TgVsqgnPIfMOBSgYOO-TI" alt/> <strong>Source</strong>: <a href="https://www.deviantart.com/boeingboeing2/art/Boeing-777-vector-431451480">boeingboeing2, DeviantArt</a></p><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p>Refer to the <a href="../tutorials-aircraft/">Aircraft Aerodynamic Analysis</a> tutorial before studying this tutorial.</p></div></div><blockquote><p><strong>Recipe</strong></p><ol><li>Define the geometries of a fuselage, wing, horizontal tail and vertical tail.</li><li>Perform an aerodynamic analysis of this aircraft configuration at given freestream conditions and reference values.</li><li>Evaluate the derivatives of the aerodynamic coefficients with respect to the freestream conditions.</li><li>Evaluate the quantities of interest for aerodynamic stability.</li></ol></blockquote><p>Let&#39;s import the relevant packages.</p><pre><code class="language-julia hljs">using AeroFuse          # Main package
using Plots             # Plotting library
gr(                     # Plotting backend
    size = (800,600),   # Size
    dpi = 300,          # Resolution
    palette = :Dark2_8  # Color scheme
)
using LaTeXStrings      # For LaTeX printing in plots</code></pre><h2 id="Aircraft-Geometry"><a class="docs-heading-anchor" href="#Aircraft-Geometry">Aircraft Geometry</a><a id="Aircraft-Geometry-1"></a><a class="docs-heading-anchor-permalink" href="#Aircraft-Geometry" title="Permalink"></a></h2><p>First, let&#39;s define the fuselage. Here we&#39;ll define it by combining a cylindrical definition for the cabin with <a href="https://mathworld.wolfram.com/Hyperellipse.html">hyperelliptical</a> curves for the nose and rear.</p><pre><code class="language-julia hljs"># Fuselage definition
fuse = HyperEllipseFuselage(
    radius = 3.04,          # Radius, m
    length = 63.7,          # Length, m
    x_a    = 0.15,          # Start of cabin, ratio of length
    x_b    = 0.7,           # End of cabin, ratio of length
    c_nose = 2.0,           # Curvature of nose
    c_rear = 1.2,           # Curvature of rear
    d_nose = -0.5,          # &quot;Droop&quot; or &quot;rise&quot; of nose, m
    d_rear = 1.0,           # &quot;Droop&quot; or &quot;rise&quot; of rear, m
    position = [0.,0.,0.]   # Set nose at origin, m
)

# Compute geometric properties
ts = 0:0.1:1                # Distribution of sections for nose, cabin and rear
S_f = wetted_area(fuse, ts) # Surface area, m²
V_f = volume(fuse, ts)      # Volume, m³

# Get coordinates of rear end
fuse_end = fuse.affine.translation + [ fuse.length, 0., 0. ]</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">3-element StaticArraysCore.SVector{3, Float64} with indices SOneTo(3):
 63.7
  0.0
  0.0</code></pre><p>Now, let&#39;s define the lifting surfaces. We&#39;ll download a supercritical airfoil for the wing section; note that this is not the same one as used in the Boeing 777-200LR. We&#39;ll also define a two-section wing.</p><pre><code class="language- hljs"># Define one airfoil
foil_w = read_foil(download(&quot;http://airfoiltools.com/airfoil/seligdatfile?airfoil=rae2822-il&quot;))

# Define vector of airfoils
foils = [ foil_w, foil_w, naca4((0,0,1,2)) ]

# Wing
wing = Wing(
    foils       = foils,                        # Airfoils
    chords      = [14.0, 9.73, 1.43561],        # Chord lengths
    spans       = [14.0, 46.9] / 2,             # Span lengths
    dihedrals   = fill(6, 2),                   # Dihedral angles (deg)
    sweeps      = fill(35.6, 2),                # Sweep angles (deg )
    chord_ratio     = 0.,                           # Leading-edge sweep
    position    = [19.51, 0., -2.5],            # Position
    symmetry    = true                          # Symmetry
)

b_w = span(wing)
S_w = projected_area(wing)
c_w = mean_aerodynamic_chord(wing)
x_w, y_w, z_w = mac_w = mean_aerodynamic_center(wing)</code></pre><p>For reference, let&#39;s plot what we have so far.</p><pre><code class="language- hljs">p1 = plot(
    xaxis = L&quot;x&quot;, yaxis = L&quot;y&quot;, zaxis = L&quot;z&quot;,
    aspect_ratio = 1,
    zlim = (-0.5, 0.5) .* span(wing),
    camera = (30,30)
)

plot!(fuse, label = &quot;Fuselage&quot;, alpha = 0.6)
plot!(wing, label = &quot;Wing&quot;)</code></pre><h3 id="Stabilizers"><a class="docs-heading-anchor" href="#Stabilizers">Stabilizers</a><a id="Stabilizers-1"></a><a class="docs-heading-anchor-permalink" href="#Stabilizers" title="Permalink"></a></h3><p>Now, let&#39;s add the stabilizers. First, the horizontal tail.</p><pre><code class="language-julia hljs">htail = WingSection(
    area        = 101,  # Area (m²)
    aspect      = 4.2,  # Aspect ratio
    taper       = 0.4,  # Taper ratio
    dihedral    = 7.,   # Dihedral angle (deg)
    sweep       = 35.,  # Sweep angle (deg)
    chord_ratio     = 0.,   # Leading-edge sweep
    root_foil   = naca4(0,0,1,2),
    symmetry    = true,

    # Orientation
    angle       = -2,           # Incidence angle (deg)
    axis        = [0., 1., 0.], # Axis of rotation, y-axis
    position    = [ fuse_end.x - 8., 0., 0.],
)

b_h = span(htail)
S_h = projected_area(htail)
c_h = mean_aerodynamic_chord(htail)
x_h, y_h, z_h = mac_h = mean_aerodynamic_center(htail)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">3-element StaticArraysCore.SVector{3, Float64} with indices SOneTo(3):
 60.08867631466764
  0.0
  0.1532559539584015</code></pre><p>Now the vertical tail.</p><pre><code class="language-julia hljs">vtail = WingSection(
    area        = 56.1, # Area (m²)
    aspect      = 1.5,  # Aspect ratio
    taper       = 0.4,  # Taper ratio
    sweep       = 44.4, # Sweep angle (deg)
    chord_ratio     = 0.,   # Leading-edge sweep
    root_foil   = naca4(0,0,0,9),

    # Orientation
    angle       = 90.,       # To make it vertical
    axis        = [1, 0, 0], # Axis of rotation, x-axis
    position    = htail.affine.translation - [2.,0.,0.]
) # Not a symmetric surface

b_v = span(vtail)
S_v = projected_area(vtail)
c_v = mean_aerodynamic_chord(vtail)
x_v, y_v, z_v = mac_v = mean_aerodynamic_center(vtail)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">3-element StaticArraysCore.SVector{3, Float64} with indices SOneTo(3):
 59.17243218476657
  2.407305072320327e-16
  3.9314275332224553</code></pre><p>Let&#39;s mesh and plot the lifting surfaces.</p><pre><code class="language- hljs">wing_mesh = WingMesh(wing, [8,16], 10,
    span_spacing = fill(Uniform(), 4) # Number of spacings = number of spanwise stations
    # (including symmetry)
)

htail_mesh = WingMesh(htail, [10], 8)
vtail_mesh = WingMesh(vtail, [8], 6)

# Plot meshes
plt = plot(
    xaxis = L&quot;x&quot;, yaxis = L&quot;y&quot;, zaxis = L&quot;z&quot;,
    aspect_ratio = 1,
    zlim = (-0.5, 0.5) .* span(wing_mesh),
    camera = (30, 45),
)
plot!(fuse, label = &quot;Fuselage&quot;, alpha = 0.6)
plot!(plt, wing_mesh, label = &quot;Wing&quot;)
plot!(plt, htail_mesh, label = &quot;Horizontal Tail&quot;)
plot!(plt, vtail_mesh, label = &quot;Vertical Tail&quot;)</code></pre><h2 id="Aerodynamic-Analysis"><a class="docs-heading-anchor" href="#Aerodynamic-Analysis">Aerodynamic Analysis</a><a id="Aerodynamic-Analysis-1"></a><a class="docs-heading-anchor-permalink" href="#Aerodynamic-Analysis" title="Permalink"></a></h2><p>Now, let&#39;s generate the horseshoe system for the aircraft.</p><pre><code class="language- hljs">aircraft = ComponentVector(
    wing  = make_horseshoes(wing_mesh),
    htail = make_horseshoes(htail_mesh),
    vtail = make_horseshoes(vtail_mesh)
)</code></pre><div class="admonition is-warning"><header class="admonition-header">Alert!</header><div class="admonition-body"><p>Note that the fuselage is not included in the analysis for now, and is only included for plotting. Support for its aerodynamic analysis will be added soon.</p></div></div><p>Now, let&#39;s define the freestream conditions.</p><pre><code class="language-julia hljs">fs  = Freestream(
    alpha = 3.0, # degrees
    beta  = 0.0, # degrees
    omega = [0., 0., 0.]
);</code></pre><p>Similarly, define the reference values. Here, the reference flight condition will be set to Mach number <span>$M = 0.84$</span>.</p><pre><code class="language- hljs">M = 0.84 # Mach number
refs = References(
    sound_speed = 330.,
    speed    = M * 330.,
    density  = 1.225,
    span     = b_w,
    area     = S_w,
    chord    = c_w,
    location = mac_w
);
nothing #hide</code></pre><p>Let&#39;s run the aerodynamic analysis first.</p><pre><code class="language- hljs">system = solve_case(
    aircraft, fs, refs;
    compressible     = true, # Compressibility option
    # print            = true, # Prints the results for only the aircraft
    # print_components = true, # Prints the results for all components
)</code></pre><div class="admonition is-info"><header class="admonition-header">Info</header><div class="admonition-body"><p>You may receive a warning that the results are incorrect; this is due to the limitation of the vortex lattice method being able to primarily analyze only subsonic flows under the physical assumptions.</p></div></div><p>The freestream derivatives can be obtained by passing the resultant system as follows:</p><pre><code class="language- hljs">dvs = freestream_derivatives(
    system,                     # VortexLatticeSystem
    axes             = Wind(),  # Specify axis system for nearfield forces (wind by default)
    # print            = true,    # Prints the results for only the aircraft
    # print_components = true,    # Prints the results for all components
    # farfield         = true,    # Print farfield derivatives
);
nothing #hide</code></pre><p>You can access the derivatives of each lifting surface based on the keys defined in the <code>ComponentVector</code>.</p><pre><code class="language- hljs">ac_dvs = dvs.aircraft</code></pre><p>These quantities are the force and moment coefficients <span>$(C_X, C_Y, C_Z, C_l, C_m, C_n, C_{D_{i,ff}}, C_{Y_{ff}} C_{L_{ff}})$</span> generated from the nearfield and farfield analyses, and their derivatives respect to the Mach number <span>$M$</span>, freestream angles of attack and sideslip <span>$(\alpha, \beta)$</span>, and the non-dimensional angular velocity rates in stability axes <span>$(\bar{p}, \bar{q}, \bar{r})$</span>. The keys corresponding to the freestream derivatives should be evident:</p><pre><code class="language- hljs">keys(dvs.aircraft)</code></pre><p>These can be accessed either like a dictionary, or by &#39;dot&#39; syntax.</p><pre><code class="language- hljs">ac_dvs[:CZ_al], ac_dvs.CZ_al, ac_dvs.CL_al # Lift coefficient derivative wrt. alpha</code></pre><p>Note that the nearfield forces and moments <span>$(C_X, C_Y, C_Z, C_l, C_m, C_n)$</span> depend on the axis system used (<span>$C_Z$</span> is not lift if body axes are used!). You can also pretty-print the derivatives for each surface.</p><pre><code class="language- hljs">print_derivatives(dvs.aircraft, &quot;Aircraft&quot;, farfield = true)
print_derivatives(dvs.wing, &quot;Wing&quot;, farfield = true)
print_derivatives(dvs.htail, &quot;Horizontal Tail&quot;, farfield = true)
print_derivatives(dvs.vtail, &quot;Vertical Tail&quot;, farfield = true)</code></pre><h2 id="Static-Stability-Analysis"><a class="docs-heading-anchor" href="#Static-Stability-Analysis">Static Stability Analysis</a><a id="Static-Stability-Analysis-1"></a><a class="docs-heading-anchor-permalink" href="#Static-Stability-Analysis" title="Permalink"></a></h2><p>You can evaluate the static stability of the aircraft using the various quantities computed in this process, following standard computations and definitions in aircraft design and stability analysis.</p><pre><code class="language- hljs">l_h = x_h - x_w                 # Horizontal tail moment arm
V_h = S_h / S_w * l_h / c_w     # Horizontal tail volume coefficient

l_v = x_v - x_w                 # Vertical tail moment arm
V_v = S_v / S_w * l_v / b_w     # Vertical tail volume coefficient

x_cp = -refs.chord * ac_dvs.Cm / ac_dvs.CZ # Center of pressure

x_np_lon = -refs.chord * ac_dvs.Cm_al / ac_dvs.CZ_al # Neutral point

# Position vectors
x_np, y_np, z_np = r_np = refs.location + [ x_np_lon; zeros(2) ]  # Neutral point
x_cp, y_cp, z_cp = r_cp = refs.location + [ x_cp; zeros(2) ]  # Center of pressure

@info &quot;Horizontal TVC                V_h:&quot; V_h
@info &quot;Vertical TVC                  V_v:&quot; V_v
@info &quot;Wing Aerodynamic Center  x_ac (m):&quot; x_w
@info &quot;Neutral Point            x_np (m):&quot; x_np
@info &quot;Center of Pressure       x_cp (m):&quot; x_cp</code></pre><p>Let&#39;s plot the relevant quantities.</p><pre><code class="language- hljs">stab_plt = plot(
    xaxis = L&quot;x&quot;, yaxis = L&quot;y&quot;, zaxis = L&quot;z&quot;,
    aspect_ratio = 1,
    zlim = (-0.5, 0.5) .* span(wing_mesh),
    camera = (30,60),
)
plot!(fuse, label = &quot;Fuselage&quot;, alpha = 0.6)
plot!(stab_plt, wing_mesh, label = &quot;Wing&quot;, mac = false)
plot!(stab_plt, htail_mesh, label = &quot;Horizontal Tail&quot;, mac = false)
plot!(stab_plt, vtail_mesh, label = &quot;Vertical Tail&quot;, mac = false)

scatter!(Tuple(r_np), color = :orange, label = &quot;Neutral Point&quot;)
scatter!(Tuple(r_cp), color = :brown, label = &quot;Center of Pressure&quot;)</code></pre><hr/><p><em>This page was generated using <a href="https://github.com/fredrikekre/Literate.jl">Literate.jl</a>.</em></p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../tutorials-aircraft/">« Aircraft Aerodynamic Analysis</a><a class="docs-footer-nextpage" href="../howto/">How-to Guide »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.25 on <span class="colophon-date" title="Friday 8 December 2023 23:35">Friday 8 December 2023</span>. Using Julia version 1.9.4.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
