<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Aircraft Aerodynamic Analysis · AeroMDAO</title><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.039/juliamono-regular.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.11/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><script src="../../copy.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script><link href="../assets/logo.ico" rel="icon" type="image/x-icon"/><link href="https://fonts.googleapis.com/css?family=Montesserat|Fira+Code&amp;display=swap" rel="stylesheet" type="text/css"/></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../"><img src="../assets/logo.svg" alt="AeroMDAO logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../">AeroMDAO</a></span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><span class="tocitem">Tutorials</span><ul><li><a class="tocitem" href="../tutorials-airfoil/">Airfoil Aerodynamic Analysis</a></li><li class="is-active"><a class="tocitem" href>Aircraft Aerodynamic Analysis</a><ul class="internal"><li><a class="tocitem" href="#Objectives"><span>Objectives</span></a></li><li><a class="tocitem" href="#Your-First-Wing"><span>Your First Wing</span></a></li><li><a class="tocitem" href="#Your-First-Vortex-Lattice-Analysis"><span>Your First Vortex Lattice Analysis</span></a></li></ul></li></ul></li><li><a class="tocitem" href="../howto/">How-to Guide</a></li><li><a class="tocitem" href="../theory/">Theory</a></li><li><span class="tocitem">Reference</span><ul><li><a class="tocitem" href="../geometry/">Geometry API</a></li><li><a class="tocitem" href="../aerodynamics/">Aerodynamics API</a></li><li><a class="tocitem" href="../structures/">Structures API</a></li><li><a class="tocitem" href="../development/">In-Progress API</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Tutorials</a></li><li class="is-active"><a href>Aircraft Aerodynamic Analysis</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Aircraft Aerodynamic Analysis</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/GodotMisogi/AeroMDAO.jl/blob/main/docs/lit/tutorials-aircraft.jl" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h2 id="Objectives"><a class="docs-heading-anchor" href="#Objectives">Objectives</a><a id="Objectives-1"></a><a class="docs-heading-anchor-permalink" href="#Objectives" title="Permalink"></a></h2><p>Here we will show you how to perform an aerodynamic analysis of a conventional aircraft. Specifically we will:</p><ol><li>Define the geometries of a wing, horizontal tail and vertical tail.</li><li>Mesh and plot the geometries for numerical analyses.</li><li>Perform an aerodynamic analysis of this aircraft configuration at given freestream conditions and reference values.</li><li>Evaluate its drag polar for a given range of angles of attack.</li><li>Plot the spanwise loading distribution for the wing.</li></ol><p>For this, we will need to import some packages which will be convenient for plotting.</p><pre><code class="language-julia hljs">using AeroMDAO      # Main package
using Plots         # Plotting library
gr(dpi = 300)       # Plotting backend
using LaTeXStrings  # For LaTeX printing in plots</code></pre><h2 id="Your-First-Wing"><a class="docs-heading-anchor" href="#Your-First-Wing">Your First Wing</a><a id="Your-First-Wing-1"></a><a class="docs-heading-anchor-permalink" href="#Your-First-Wing" title="Permalink"></a></h2><p>Here you will learn how to define a wing using an intuitive parametrization scheme. First, we define a <code>Vector</code> of <code>Foil</code>s.</p><pre><code class="language-julia hljs"># Define one airfoil
airfoil_1 = naca4((4,4,1,2))

# Define vector of airfoils
airfoils  = [ airfoil_1, naca4((0,0,1,2)) ]</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">2-element Vector{Foil{Float64}}:
 NACA 4412 Foil{Float64} with 79 points.
 NACA 0012 Foil{Float64} with 79 points.</code></pre><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p>Refer to the <a href="../tutorials-airfoil/">Airfoil Aerodynamic Analysis</a> tutorial for an introduction to the <code>Foil</code> type.</p></div></div><h3 id="Parametrization"><a class="docs-heading-anchor" href="#Parametrization">Parametrization</a><a id="Parametrization-1"></a><a class="docs-heading-anchor-permalink" href="#Parametrization" title="Permalink"></a></h3><p>The following function defines a symmetric wing and prints the relevant information. Named arguments corresponding to the foil shapes, chord and span lengths, twist, dihedral and leading-edge sweep angles. The following parametrization is used for the wing, presented for visual understanding. <img src="https://godot-bloggy.xyz/post/diagrams/WingGeometry.svg" alt/></p><pre><code class="language- hljs">wing = Wing(foils     = airfoils,    # Foil profiles
            chords    = [1.0, 0.6],  # Chord lengths
            twists    = [2.0, 0.0],  # Twist angles (degrees)
            spans     = [4.0],       # Section span lengths
            dihedrals = [5.],        # Dihedral angles (degrees)
            LE_sweeps = [5.])        # Leading-edge sweep angles (degrees)</code></pre><div class="admonition is-info"><header class="admonition-header">Info</header><div class="admonition-body"><p>See the <a href="../howto/">how-to guide</a> on how to define an asymmetric wing.</p></div></div><h3 id="Visualization"><a class="docs-heading-anchor" href="#Visualization">Visualization</a><a id="Visualization-1"></a><a class="docs-heading-anchor-permalink" href="#Visualization" title="Permalink"></a></h3><p>The following function generates the coordinates of the wing&#39;s outline.</p><pre><code class="language- hljs">wing_outline = plot_wing(wing)</code></pre><p>Let&#39;s plot the geometry!</p><pre><code class="language- hljs">plt = plot(
           wing_outline[:,1], wing_outline[:,2], wing_outline[:,3],
           label = &quot;Wing&quot;,
           xaxis = &quot;x&quot;, yaxis = &quot;y&quot;, zaxis = &quot;z&quot;,
           aspect_ratio = 1,
           camera = (30, 45),
           zlim = (-0.1, span(wing) / 2),
          )</code></pre><h2 id="Your-First-Vortex-Lattice-Analysis"><a class="docs-heading-anchor" href="#Your-First-Vortex-Lattice-Analysis">Your First Vortex Lattice Analysis</a><a id="Your-First-Vortex-Lattice-Analysis-1"></a><a class="docs-heading-anchor-permalink" href="#Your-First-Vortex-Lattice-Analysis" title="Permalink"></a></h2><p>Now we would like to analyze the aerodynamics of this wing in conjunction with other lifting surfaces pertinent to aircraft.</p><h3 id="Geometry"><a class="docs-heading-anchor" href="#Geometry">Geometry</a><a id="Geometry-1"></a><a class="docs-heading-anchor-permalink" href="#Geometry" title="Permalink"></a></h3><p>We define the horizontal tail similarly to the wing. However, we also add additional position (by specifying a vector) and orientation attributes (by specifying an angle and axis of rotation) to place it at the desired location.</p><pre><code class="language- hljs"># Horizontal tail
htail = Wing(foils     = fill(naca4(0,0,1,2), 2),
             chords    = [0.7, 0.42],
             twists    = [0.0, 0.0],
             spans     = [1.25],
             dihedrals = [0.],
             LE_sweeps = [6.39],
             position  = [4., 0, 0],
             angle     = -2.,
             axis      = [0., 1., 0.])</code></pre><p>For the vertical tail, we simply replace <code>Wing</code> with <code>HalfWing</code> to define its shape.</p><pre><code class="language- hljs"># Vertical tail
vtail = HalfWing(foils     = fill(naca4(0,0,0,9), 2),
                 chords    = [0.7, 0.42],
                 twists    = [0.0, 0.0],
                 spans     = [1.0],
                 dihedrals = [0.],
                 LE_sweeps = [7.97],
                 position  = [4., 0, 0],
                 angle     = 90.,
                 axis      = [1., 0., 0.])</code></pre><p>Let&#39;s visualize the geometry of the aircraft&#39;s configuration.</p><pre><code class="language- hljs">htail_outline = plot_wing(htail)
vtail_outline = plot_wing(vtail)

plot!(plt,
    htail_outline[:,1], htail_outline[:,2], htail_outline[:,3],
    label = &quot;Horizontal Tail&quot;
   )
plot!(plt,
   vtail_outline[:,1], vtail_outline[:,2], vtail_outline[:,3],
   label = &quot;Vertical Tail&quot;
  )</code></pre><h3 id="Meshing-and-Assembly"><a class="docs-heading-anchor" href="#Meshing-and-Assembly">Meshing and Assembly</a><a id="Meshing-and-Assembly-1"></a><a class="docs-heading-anchor-permalink" href="#Meshing-and-Assembly" title="Permalink"></a></h3><p>To perform the aerodynamic analysis, we will need to discretize our geometry into a <em>mesh</em>. The following <code>WingMesh</code> function constructs a mesh for you by providing a <code>HalfWing</code> or <code>Wing</code> type with specification of spanwise panels and chordwise panels. As the wing has only one spanwise section, we provide a vector with a single  integer entry for the spanwise panel distribution.</p><pre><code class="language- hljs">wing_mesh = WingMesh(wing, [12], 6) # (Wing, [Spanwise panels], Chordwise panels)</code></pre><p>Let&#39;s see what this discretization looks like on the camber distribution of the wing.</p><pre><code class="language- hljs"># Compute camber panel distribution
wing_cam_panels = camber_panels(wing_mesh)

# Generate plotting points
plt_wing_pans   = plot_panels(wing_cam_panels)

[ plot!(plt, panel, label = &quot;&quot;, color = :lightblue) for panel in plt_wing_pans ]
plot!(plt)</code></pre><p>Similarly we define the meshes for the other surfaces and plot them.</p><pre><code class="language- hljs">htail_mesh = WingMesh(htail, [6], 4)
vtail_mesh = WingMesh(vtail, [4], 3)

[ plot!(plt, panel, label = &quot;&quot;, color = :orange)
    for panel in plot_panels(camber_panels(htail_mesh)) ]
[ plot!(plt, panel, label = &quot;&quot;, color = :lightgreen)
    for panel in plot_panels(camber_panels(vtail_mesh)) ]
plot!(plt)</code></pre><p>For the analysis, you have to assemble the meshes into a <code>ComponentArray/Vector</code>.</p><pre><code class="language- hljs">aircraft = ComponentArray(
                          wing  = make_horseshoes(wing_mesh),
                          htail = make_horseshoes(htail_mesh),
                          vtail = make_horseshoes(vtail_mesh)
                         )</code></pre><p>You can define the freestream condition as follows, by providing the angles of attack <span>$\alpha$</span> and sideslip <span>$\beta$</span> in degrees with a rotation vector <span>$\Omega$</span>.</p><pre><code class="language-julia hljs">fs  = Freestream(
                 alpha = 3.0, # degrees
                 beta  = 0.0, # degrees
                 omega = [0., 0., 0.]
                );</code></pre><p>You can define the reference values for the speed, area, span, chord, density, and location  as follows.</p><pre><code class="language- hljs">refs = References(speed    = 1.0,
                  area     = projected_area(wing),
                  span     = span(wing),
                  chord    = mean_aerodynamic_chord(wing),
                  density  = 1.225,
                  location = mean_aerodynamic_center(wing));
nothing #hide</code></pre><p>You can run the aerodynamic analysis by providing the aircraft configuration, freestream, and reference values. Optionally you can also print the results.</p><pre><code class="language- hljs">system = solve_case(
        aircraft, fs, refs;
        print            = true, # Prints the results for only the aircraft
        print_components = true, # Prints the results for all components
    )</code></pre><p>You can obtain the aerodynamic coefficients from this system. The nearfield aerodynamic force and moment coefficients are ordered as <span>$(C_{D_i}, C_Y, C_L, C_\ell, C_m, C_n)$</span>.</p><pre><code class="language- hljs">nf = nearfield(system)</code></pre><div class="admonition is-success"><header class="admonition-header">Tip</header><div class="admonition-body"><p>Refer to the <a href="../howto/">how-to guide</a> to see how to compute the aerodynamic coefficients of each component and perform stability analyses.</p></div></div><h3 id="Drag-Polar"><a class="docs-heading-anchor" href="#Drag-Polar">Drag Polar</a><a id="Drag-Polar-1"></a><a class="docs-heading-anchor-permalink" href="#Drag-Polar" title="Permalink"></a></h3><p>Now let&#39;s analyze the drag polar of this aircraft configuration by varying the angle of attack and collecting the induced drag coefficient <span>$C_{D_i}$</span>.</p><pre><code class="language- hljs"># Define function to compute system varying with angle of attack.
vary_alpha(aircraft, α, refs) = solve_case(aircraft, Freestream(alpha = α), refs)

# Run loop
αs      = -5:0.5:5
systems = [ vary_alpha(aircraft, α, refs) for α in αs ]
# Cleaner: map(α -&gt; vary_alpha(...), αs)

# Get coefficients
coeffs = nearfield.(systems)
CDis   = [ c[1] for c in coeffs ]
CLs    = [ c[3] for c in coeffs ];
nothing #hide</code></pre><p>Let&#39;s plot the drag polar!</p><pre><code class="language- hljs">plot(CDis, CLs,
     label  = &quot;&quot;,
     xlabel = L&quot;C_{D_i}&quot;,
     ylabel = L&quot;C_L&quot;,
     title  = &quot;Drag Polar&quot;,
     ls     = :solid)</code></pre><p>Let&#39;s also take a look at the variations of all the coefficients.</p><pre><code class="language- hljs"># Concatenate results into one array
data = permutedims(reduce(hcat, [α; c] for (α, c) in zip(αs, coeffs)))

# Plot
plot(data[:,1], round.(data[:,2:end], digits = 4),
     layout = (3,2),
     xlabel = L&quot;\alpha&quot;,
     ylabel = [L&quot;C_{D_i}&quot; L&quot;C_Y&quot; L&quot;C_L&quot; L&quot;C_\ell&quot; L&quot;C_m&quot; L&quot;C_n&quot; ],
     labels = &quot;&quot;,
     size   = (800, 600)
    )</code></pre><blockquote><p><strong>Tip:</strong> You can convert this into a DataFrame for convenient reference.</p><pre><code class="language-julia hljs">using DataFrames, StatsPlots
data = DataFrame([ xs for xs in zip(αs, coeffs) ])
rename!(data, [:α, :CD, :CY, :CL, :Cl, :Cm, :Cn])
@df data plot()</code></pre></blockquote><h3 id="Spanwise-Loading"><a class="docs-heading-anchor" href="#Spanwise-Loading">Spanwise Loading</a><a id="Spanwise-Loading-1"></a><a class="docs-heading-anchor-permalink" href="#Spanwise-Loading" title="Permalink"></a></h3><p>You can compute the aerodynamic coefficients on the panels from the system.</p><pre><code class="language- hljs">CFs, CMs = surface_coefficients(system)

# Get panels along the chord-lines of the wing.
wing_panels = chord_panels(wing_mesh)

# Compute spanwise loads
span_loads  = spanwise_loading(wing_panels, CFs.wing, projected_area(wing))
CL_loads    = vec(sum(system.circulations.wing, dims = 1)) / (0.5 * refs.speed * refs.chord);

# Plot spanwise loadings
plot_CD = plot(span_loads[:,1], span_loads[:,2], label = :none, ylabel = &quot;CDi&quot;)
plot_CY = plot(span_loads[:,1], span_loads[:,3], label = :none, ylabel = &quot;CY&quot;)
plot_CL = begin
            plot(span_loads[:,1], span_loads[:,4], label = :none, xlabel = &quot;y&quot;, ylabel = &quot;CL&quot;)
            plot!(span_loads[:,1], CL_loads, label = &quot;Normalized&quot;, xlabel = &quot;y&quot;)
          end
plot(plot_CD, plot_CY, plot_CL, size = (800, 700), layout = (3,1))</code></pre><hr/><p><em>This page was generated using <a href="https://github.com/fredrikekre/Literate.jl">Literate.jl</a>.</em></p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../tutorials-airfoil/">« Airfoil Aerodynamic Analysis</a><a class="docs-footer-nextpage" href="../howto/">How-to Guide »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.12 on <span class="colophon-date" title="Wednesday 2 February 2022 19:24">Wednesday 2 February 2022</span>. Using Julia version 1.7.1.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
